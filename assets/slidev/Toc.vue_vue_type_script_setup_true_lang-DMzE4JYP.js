import{d as h,r as g,B as d,o,c as p,k as L,f as k,b as u,z as v,F as $,ag as b,i as C,l as m,g as T,h as _}from"../modules/vue-9M24w38T.js";import{u as N}from"./context-C7sMbwAs.js";import{a as P,ad as S}from"../index-Cfq7beyJ.js";import{_ as I}from"./title-renderer.md_vue_type_script_setup_true_lang-BLItiyyc.js";const D=["href","innerHTML"],M=["href"],A=h({__name:"Link",props:{to:{},title:{}},setup(c){const{isPrintMode:n}=P();return(t,i)=>{const s=g("RouterLink");return!d(n)&&t.title?(o(),p(s,{key:0,to:String(t.to),onClick:i[0]||(i[0]=a=>a.target.blur()),innerHTML:t.title},null,8,["to","innerHTML"])):!d(n)&&!t.title?(o(),p(s,{key:1,to:String(t.to),onClick:i[1]||(i[1]=a=>a.target.blur())},{default:L(()=>[k(t.$slots,"default")]),_:3},8,["to"])):d(n)&&t.title?(o(),u("a",{key:2,href:`#${t.to}`,innerHTML:t.title},null,8,D)):(o(),u("a",{key:3,href:`#${t.to}`},[k(t.$slots,"default")],8,M))}}}),B=["start"],H=h({__name:"TocList",props:{level:{default:1},start:{},listStyle:{},list:{},listClass:{}},setup(c){const n=c,t=v(()=>[...S(n.listClass||[]),"slidev-toc-list",`slidev-toc-list-level-${n.level}`]),i=v(()=>[...S(n.listStyle||[])]);return(s,a)=>{const f=A,l=g("TocList",!0);return s.list&&s.list.length>0?(o(),u("ol",{key:0,class:C(t.value),start:s.level===1?s.start:void 0,style:_(i.value.length>=s.level?`list-style:${i.value[s.level-1]}`:void 0)},[(o(!0),u($,null,b(s.list,e=>(o(),u("li",{key:e.path,class:C(["slidev-toc-item",[{"slidev-toc-item-active":e.active},{"slidev-toc-item-parent-active":e.activeParent}]])},[m(f,{to:e.path},{default:L(()=>[m(d(I),{no:e.no},null,8,["no"])]),_:2},1032,["to"]),e.children.length>0?(o(),p(l,{key:0,level:s.level+1,"list-style":s.listStyle,list:e.children,"list-class":s.listClass},null,8,["level","list-style","list","list-class"])):T("v-if",!0)],2))),128))],14,B)):T("v-if",!0)}}}),E=h({__name:"Toc",props:{columns:{default:1},listClass:{default:""},start:{default:1},listStyle:{default:""},maxDepth:{default:Number.POSITIVE_INFINITY},minDepth:{default:1},mode:{default:"all"}},setup(c){const n=c,{$slidev:t}=N();function i(l,e=1){if(e>Number(n.maxDepth))return[];if(e<Number(n.minDepth)){const r=l.find(y=>y.active||y.activeParent);return r?i(r.children,e+1):[]}return l.map(r=>({...r,children:i(r.children,e+1)}))}function s(l){return l.filter(e=>e.active||e.activeParent||e.hasActiveParent).map(e=>({...e,children:s(e.children)}))}function a(l){const e=l.some(r=>r.active||r.activeParent||r.hasActiveParent);return l.filter(()=>e).map(r=>({...r,children:a(r.children)}))}const f=v(()=>{const l=t==null?void 0:t.nav.tocTree;if(!l)return[];let e=i(l);return n.mode==="onlyCurrentTree"?e=s(e):n.mode==="onlySiblings"&&(e=a(e)),e});return(l,e)=>(o(),u("div",{class:"slidev-toc",style:_(`column-count:${l.columns}`)},[m(H,{level:1,start:l.start,"list-style":l.listStyle,list:f.value,"list-class":l.listClass},null,8,["start","list-style","list","list-class"])],4))}});export{E as _};
